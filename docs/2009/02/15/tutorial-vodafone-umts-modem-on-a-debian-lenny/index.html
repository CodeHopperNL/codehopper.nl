<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"> <title>Tutorial: Vodafone UMTS modem on a Debian lenny &#8211; CodeHopper</title> <meta name="description" content="Today I finally had the time to give it a try to have my Vodafone UMTS modem running on my [not so] old Debian lenny/SID which is actually powering my desktop PC.I was a little scared, I must admit, since I never dealt with PPP stuff with linux… I always avoided it actually â˜º"> <meta name="keywords" content=""> <!-- Twitter Cards --> <meta name="twitter:card" content="summary"> <meta name="twitter:image" content="logo.png"> <meta name="twitter:title" content="Tutorial: Vodafone UMTS modem on a Debian lenny"> <meta name="twitter:description" content="Today I finally had the time to give it a try to have my Vodafone UMTS modem running on my [not so] old Debian lenny/SID which is actually powering my desktop PC.I was a little scared, I must admit, since I never dealt with PPP stuff with linux… I always avoided it actually â˜º"> <meta name="twitter:site" content="@skuro"> <meta name="twitter:creator" content="@skuro"> <!-- Open Graph --> <meta property="og:locale" content="en_US"> <meta property="og:type" content="article"> <meta property="og:title" content="Tutorial: Vodafone UMTS modem on a Debian lenny"> <meta property="og:description" content="Today I finally had the time to give it a try to have my Vodafone UMTS modem running on my [not so] old Debian lenny/SID which is actually powering my desktop PC.I was a little scared, I must admit, since I never dealt with PPP stuff with linux… I always avoided it actually â˜º"> <meta property="og:url" content="//codehopper.nl/2009/02/15/tutorial-vodafone-umts-modem-on-a-debian-lenny/"> <meta property="og:site_name" content="CodeHopper"> <meta property="og:image" content="//codehopper.nl/img/logo.png"> <link rel="canonical" href="//codehopper.nl/2009/02/15/tutorial-vodafone-umts-modem-on-a-debian-lenny/"> <!-- Handheld --> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Feed --> <link type="application/atom+xml" rel="alternate" href="//codehopper.nl/feed.xml" title="" /> <!-- Favicons --> <link rel="shortcut icon" type="image/png" href="/favicon.png" /> <link rel="shortcut icon" href="/favicon.ico" /> <!-- CSS --> <link rel="stylesheet" type="text/css" href="/assets/css/main.css"> <!-- Left Block Image for Posts --> <style type="text/css"> #posts.inner-post-page .block-left {background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url(/img/default-post.png) no-repeat;background-size: cover;} </style> <!-- Left Block Images for Home and Pages --> <style type="text/css"> #posts .block-left {background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url(/img/post-list.png) no-repeat;background-size: cover, cover;} .block-left {background: linear-gradient(rgba(44,45,51,0.9), rgba(44,45,51,0.9)), url(/img/home.png) no-repeat;background-size: cover;} </style> </head> <body id="posts" class="inner-post-page"> <div class="block-left" style="background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url(/img/post/vodafone-umts.jpg) no-repeat; background-size: cover"> <div class="content"> <a href="/" class="logo"><img src="/img/logo-small.png"></a> <div class="post-title-section"> <div class="section-line">Posts <em>/</em></div> <h1 class="section-title">Tutorial: Vodafone UMTS modem on a Debian lenny </h1> <ul class="tags"> <li><a href="/tags#linux">linux</a></li> </ul> <div class="section-line reverse"><a href="/posts">Back to posts</a> <em>/</em></div> </div> </div> </div> <div class="block-right"> <div class="share-buttons"> <a href="https://twitter.com/intent/tweet?text=//codehopper.nl/2009/02/15/tutorial-vodafone-umts-modem-on-a-debian-lenny/" class="btn btn_twitter" title="Share on Twitter"><i class="fa fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a> <a href="https://www.facebook.com/sharer/sharer.php?u=//codehopper.nl/2009/02/15/tutorial-vodafone-umts-modem-on-a-debian-lenny/" class="btn btn_facebook" title="Share on Facebook"><i class="fa fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a> <a href="https://plus.google.com/share?url=//codehopper.nl/2009/02/15/tutorial-vodafone-umts-modem-on-a-debian-lenny/" class="btn btn_google-plus" title="Share on Google Plus"><i class="fa fa-fw fa-google-plus" aria-hidden="true"></i><span> Google+</span></a> </div> <a href="/posts.html" title="posts" class="posts-menu-icon"></a> <!-- a title="/projects" class="projects-menu-icon"> <span></span> </a --> <div class="inner-post content"> <nav class="pagination"> <a href="/2009/01/08/gobolinux-vs-macosx-1-0/" class="pagination_pager" title="GoboLinux vs MacOSX 1-0 ">&lt; GoboLinux vs MacOSX 1-0</a> <a href="/2009/02/17/tutorial-corkscrew-on-leopard/" class="pagination_pager" title="Tutorial: Corkscrew on Leopard ">Tutorial: Corkscrew on Leopard &gt;</a> </nav> <div class="date-highlight">15 Feb 2009</div> <p>Today I finally had the time to give it a try to have my Vodafone UMTS modem running on my [not so] old Debian lenny/SID which is actually powering my desktop PC. I was a little scared, I must admit, since I never dealt with PPP stuff with linux… I always avoided it actually â˜º</p> <p>It turned out, it was way much easier than I originally thought. The tougher part was due to my PC have no internet connection available, so that I had no chance to apt-get nothing. I knew there would be something missing, as there actually were, so I turned on my MacBook pro[<a href="#note-2">1</a>] (for which Mama VF provides a crappy software) and stated digging the net for what I needed…</p> <p>My Linux skills are not being used since some months, but I still remember some rules about a penguin dealing with new cool devices.</p> <h2 id="know-your-hardware">Know your hardware</h2> <p>As always, the first thing you have to do when trying to install some new device on a linux box is to collect as much information as possible about the harware it is based on. This time it was too easy: the bottom part of the modem has some bold lines stating</p> <div class="highlighter-rouge"><pre class="highlight"><code>HUAWEI
Model: e220
</code></pre></div> <p>way too easy, man!</p> <h2 id="find-out-ifhow-good-your-hardware-is-already-sopported">Find out if/how good your hardware is already sopported</h2> <p>I was expecting some exotic standalone projects were offering linux support for this little device, but it turned out it is supported out of the box by the Linux kernel since version 2.6.20, and it’s written also in the <a title="Huawei e220 on wikipedia" href="http://en.wikipedia.org/wiki/Vodafone_Mobile_Connect_USB_Modem">wikipedia entry</a> for the modem! Geezz… time has changed, don’t you think so?º</p> <p>A quick check make a growing fear disappear[<a href="#note-2">2</a>]:</p> <div class="highlighter-rouge"><pre class="highlight"><code>sku@dreamland:~$ uname -r
2.6.22-1-mepis-smp
</code></pre></div> <p>YES!</p> <h2 id="find-out-some-how-to-and-do-it">Find out some how-to and do it!</h2> <p>The official Debian wiki <a href="http://wiki.debian.org/Huawei/E220">says</a> simply:</p> <blockquote>wvdial hsdpa</blockquote> <p>That’s it.Uhm.. no configuration, no telephone number to dial, no PIN, no nothing?! That’s strange… but let’s give it a try:</p> <div class="highlighter-rouge"><pre class="highlight"><code>sku@dreamland:~$ wvdial hsdpa
bash: wvdial: command not found
</code></pre></div> <p>Ok, I already knew it. Here starts the real game! Luckily enough, there is a Debian package named wvdial which should bring all the stuff I need in my box. Since I have no internet connection, the only chance I have is to download all the .deb files by hand and install it via dpkg. apt-get told me I needed only four of the dependencies for wvdial, so I downloaded them following the links on <a href="http://packages.debian.org/lenny/wvdial">packages.debian.org</a> to cope with the version hell. Once transferred the files from the Mac into the PC, I let Debian handle them:</p> <div class="highlighter-rouge"><pre class="highlight"><code>sku@dreamland:~$ sudo dpkg -i *.deb
</code></pre></div> <h2 id="find-the-right-configuration">Find the right configuration</h2> <p>It was impossible that no configuration at all was needed, and in fact some stuff was to be written somewhere, since wvdial complained about no wvdial.conf present in /etc. The first configuration was obtained with the wvdialconf tool provided by the wvdial package, but something was still missing:</p> <div class="highlighter-rouge"><pre class="highlight"><code>sku@dreamland:~/Desktop/wvdial/test$ wvdial
--&gt; WvDial: Internet dialer version 1.60
--&gt; Cannot get information for serial port.
--&gt; Initializing modem.
--&gt; Sending: ATZ
ATZ
OK
--&gt; Sending: ATQ0 V1 E1 S0=0 &amp;amp;amp;C1 &amp;amp;amp;D2
ATQ0 V1 E1 S0=0 &amp;amp;amp;C1 &amp;amp;amp;D2
OK
--&gt; Modem initialized.
--&gt; Configuration does not specify a valid phone number.
--&gt; Configuration does not specify a valid login name.
--&gt; Configuration does not specify a valid password.
sku@dreamland:~/Desktop/wvdial/test$
</code></pre></div> <p>After some other Internet investigation and tries, I finally came to a working configuration (user name and password can be anything, AFAIK):</p> <div class="highlighter-rouge"><pre class="highlight"><code>sku@dreamland:~$ cat /etc/wvdial.conf
[Dialer Defaults]
Init1 = ATZ
Init2 = ATQ0 V1 E1 S0=0 &amp;amp;amp;C1 &amp;amp;amp;D2
Init3 = AT+CPIN=&amp;quot;0000&amp;quot;
Modem Type = Analog Modem
ISDN = 0
New PPPD = yes
Phone = *99***1#
Modem = /dev/ttyUSB0
Username = vodafone
Password = vodafone
Baud = 460800
</code></pre></div> <h2 id="have-fun">Have fun</h2> <p>Last time <code class="highlighter-rouge">sudo wvdial</code> did the trick and, well, now I’m writing this post from my PC through the Huawei e220! ;) I really appreciate how straightforward is now to do such things in Linux. Apart from the configuration, for which I had to guess a little bit how to handle it by my own, apt-get and a good howto would have been enough for everyone to install the required software.</p> <p>Since configuration is (as quite always) the hard part, the posted wvdial.conf is the real useful part of the whole tutorial. My UMTS provider is actually Vodafone NL, but the configuration posted should be good for other carriers too.</p> <p>That’s it, hope it helps!</p> <p><a name="note-1">[1]</a> connection sharing from the UMTS modem to either WiFi or Ethernet peers doesn’t work from my Mac. I tried several times but with no luck…</p> <p><a name="note-2">[2]</a> ok, yes, my kernel is actually from Mepis, but I’ve update the whole system and now I’m on a quite pure Debian lenny :)</p> <br> <nav class="pagination"> <a href="/2009/01/08/gobolinux-vs-macosx-1-0/" class="pagination_pager" title="GoboLinux vs MacOSX 1-0 ">&lt; GoboLinux vs MacOSX 1-0</a> <a href="/2009/02/17/tutorial-corkscrew-on-leopard/" class="pagination_pager" title="Tutorial: Corkscrew on Leopard ">Tutorial: Corkscrew on Leopard &gt;</a> </nav> <a href="https://twitter.com/intent/tweet?text=//codehopper.nl/2009/02/15/tutorial-vodafone-umts-modem-on-a-debian-lenny/" class="btn btn_twitter" title="Share on Twitter"><i class="fa fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a> <a href="https://www.facebook.com/sharer/sharer.php?u=//codehopper.nl/2009/02/15/tutorial-vodafone-umts-modem-on-a-debian-lenny/" class="btn btn_facebook" title="Share on Facebook"><i class="fa fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a> <a href="https://plus.google.com/share?url=//codehopper.nl/2009/02/15/tutorial-vodafone-umts-modem-on-a-debian-lenny/" class="btn btn_google-plus" title="Share on Google Plus"><i class="fa fa-fw fa-google-plus" aria-hidden="true"></i><span> Google+</span></a> <br /> <div id="disqus_thread"></div> <script> /** * RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS. * LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/ /* var disqus_config = function () { this.page.url = PAGE_URL; this.page.identifier = PAGE_IDENTIFIER; }; */ (function() { /* DON'T EDIT BELOW THIS LINE */ var d = document, s = d.createElement('script'); s.src = '//skuro.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> </div> </div> <!-- JS --> <script src="/assets/js/main.min.js"></script> <div class="overlay"> <ul class="projects-menu"> <li style="background:url(http://taylantatli.me/Halve/images/halve-home-image.png) center center no-repeat;"> <a href="http://taylantatli.me/Halve" class="inactive" target="_blank" rel="nofollow external"> <span> Halve Jekyll Theme <br><em>in progress</em> </span> </a> </li> <li style="background:url(https://cloud.githubusercontent.com/assets/754514/14509720/61c61058-01d6-11e6-93ab-0918515ecd56.png) center center no-repeat;"> <a href="http://taylantatli.me/Moon" target="_blank" rel="nofollow external"> <span> Moon Jekyll Theme </span> </a> </li> <li style="background:url(https://raw.githubusercontent.com/TaylanTatli/Ramme/master/assets/img/screenshot-post.png) center center no-repeat;"> <a href="http://taylantatli.me/Ramme" target="_blank" rel="nofollow external"> <span> Ramme Jekyll Theme </span> </a> </li> <li style="background:url(https://raw.githubusercontent.com/TaylanTatli/Daisy-Pelican-Theme/master/Preview-1.png) center center no-repeat;"> <a href="http://taylantatli.me/Daisy-Pelican-Theme/" target="_blank" rel="nofollow external"> <span> Daisy Pelican Theme </span> </a> </li> <li style="background:url(https://raw.githubusercontent.com/TaylanTatli/Block-Icon-Theme/master/Preview.png) center center no-repeat;"> <a href="https://github.com/TaylanTatli/Block-Icon-Theme" class="inactive" target="_blank" rel="nofollow external"> <span> Block Icon Theme <br><em>in progress</em> </span> </a> </li> <li style="background:url(https://raw.githubusercontent.com/TaylanTatli/StartPage/master/preview.png) center center no-repeat;"> <a href="http://taylantatli.me/StartPage/" class="inactive" target="_blank" rel="nofollow external"> <span> Start Page <br><em>in progress</em> </span> </a> </li> </ul> </div> </body> </html>
