<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"> <title>Tutorial: Corkscrew on Leopard &#8211; CodeHopper</title> <meta name="description" content="As I usually work at the client premises, I need to access the Net through their HTTP proxy. It’s a common need and I expect to deal easily with it for every task my job needs me to accomplish. But I’m wrong…"> <meta name="keywords" content=""> <!-- Twitter Cards --> <meta name="twitter:card" content="summary"> <meta name="twitter:image" content="http://localhost:4000/img/logo.png"> <meta name="twitter:title" content="Tutorial: Corkscrew on Leopard"> <meta name="twitter:description" content="As I usually work at the client premises, I need to access the Net through their HTTP proxy. It’s a common need and I expect to deal easily with it for every task my job needs me to accomplish. But I’m wrong…"> <meta name="twitter:site" content="@skuro"> <meta name="twitter:creator" content="@skuro"> <!-- Open Graph --> <meta property="og:locale" content="en_US"> <meta property="og:type" content="article"> <meta property="og:title" content="Tutorial: Corkscrew on Leopard"> <meta property="og:description" content="As I usually work at the client premises, I need to access the Net through their HTTP proxy. It’s a common need and I expect to deal easily with it for every task my job needs me to accomplish. But I’m wrong…"> <meta property="og:url" content="http://localhost:4000/2009/02/17/tutorial-corkscrew-on-leopard/"> <meta property="og:site_name" content="CodeHopper"> <meta property="og:image" content="http://localhost:4000/img/logo.png"> <link rel="canonical" href="http://localhost:4000/2009/02/17/tutorial-corkscrew-on-leopard/"> <!-- Handheld --> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Feed --> <link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="CodeHopper" /> <!-- Favicons --> <link rel="shortcut icon" type="image/png" href="/favicon.png" /> <link rel="shortcut icon" href="/favicon.ico" /> <!-- CSS --> <link rel="stylesheet" type="text/css" href="/assets/css/main.css"> <!-- Left Block Image for Posts --> <style type="text/css"> #posts.inner-post-page .block-left {background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url(/img/default-post.png) no-repeat;background-size: cover;} </style> <!-- Left Block Images for Home and Pages --> <style type="text/css"> #posts .block-left {background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url(/img/post-list.png) no-repeat;background-size: cover, cover;} .block-left {background: linear-gradient(rgba(44,45,51,0.9), rgba(44,45,51,0.9)), url(/img/home.png) no-repeat;background-size: cover;} </style> </head> <body id="posts" class="inner-post-page"> <div class="block-left" style="background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url(/img/post/corkscrewvsmac.jpg) no-repeat; background-size: cover"> <div class="content"> <a href="/" class="logo"><img src="/img/logo-small.png"></a> <div class="post-title-section"> <div class="section-line">Posts <em>/</em></div> <h1 class="section-title">Tutorial: Corkscrew on Leopard </h1> <ul class="tags"> <li><a href="/tags#apple">apple</a></li> </ul> <a href="https://twitter.com/intent/tweet?text=http://localhost:4000/2009/02/17/tutorial-corkscrew-on-leopard/" class="btn btn_twitter" title="Share on Twitter"><i class="fa fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a> <a href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/2009/02/17/tutorial-corkscrew-on-leopard/" class="btn btn_facebook" title="Share on Facebook"><i class="fa fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a> <a href="https://news.ycombinator.com/submitlink?u=http://localhost:4000/2009/02/17/tutorial-corkscrew-on-leopard/" class="btn btn_hn" title="Share on Hacker News"><i class="fa fa-fw fa-hacker-news" aria-hidden="true"></i><span> Hacker News</span></a> <div class="section-line reverse"><a href="/posts">Back to posts</a> <em>/</em></div> </div> </div> </div> <div class="block-right"> <div class="inner-post content"> <nav class="pagination"> <a href="/2009/02/15/tutorial-vodafone-umts-modem-on-a-debian-lenny/" class="pagination_pager" title="Tutorial: Vodafone UMTS modem on a Debian lenny ">&lt; Tutorial: Vodafone UMTS mod...</a> <a href="/2009/03/24/apache-meetups-day-1/" class="pagination_pager" title="Apache Meetups - Day #1 ">Apache Meetups - Day #1 &gt;</a> </nav> <div class="date-highlight">17 Feb 2009</div> <p>As I usually work at the client premises, I <strong>need</strong> to access the Net through their HTTP proxy. It’s a common need and I expect to deal easily with it for every task my job needs me to accomplish. But I’m wrong…</p> <p>Though most tools and software which access HTTP hosts around the Net offer some configurable ways to set up a proxy server, and most of them can cope with proxy authentication as well, SSH has some troubles here. In other words, SSH doesn’t know how to tunnel data through an HTTP proxy. S**t! Are we going to surrender to that Giant Squid that block our shy attempts to connect to our servers?</p> <p>Luckily enough, <a title="Corkscrew homepage" href="http://www.agroman.net/corkscrew/">Corkscrew</a> comes in handy to help us reaching our network boxes through that evil HTTP proxy. The following steps will help you to install and it on OSX 10.5 to tunnel your SSH sessions through a proxied HTTP stream.</p> <h2 id="use-the-source-luke">Use the Source, Luke!</h2> <p>Even if you can use MacPorts to install Corkscrew, make sure you’re at home before trying it: HTTP Proxies are scaring monsters for <em>port</em> users too. So, let’s do it the OpenSource way and grab the code from <a title="Corkscrew sources" href="http://www.agroman.net/corkscrew/corkscrew-2.0.tar.gz">here</a>:</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~$ wget http://www.agroman.net/corkscrew/corkscrew-2.0.tar.gz
~$ tar xvzf corkscrew-2.0.tar.gz
~$ cd corkscrew-2.0
</code></pre></div></div> <p>From the included README you can notice that on the “tested on” list there’s no mention to OSX, and in fact if you run the <em>configure</em> script it complains that your host is not recognized, so that you have to provide one in the command line before you’re able to compile. Fair enough. This does the trick:</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~$ ./configure --host=i686-apple-darwin9
~$ make
~$ sudo make install
</code></pre></div></div> <p>So far so good. Now that you have installed your tunnelling software, you must instruct hot SSH to use it.</p> <h2 id="configuration">Configuration</h2> <p>The README provided in the corkscrew distribution contains almost all the information you need to use it. To configure SSH to use the HTTP tunnel, you should edit your personal SSH configuration file in ~/.ssh/config, but for some reason this didn’t work in my situation, so I edited the global SSH configuration file:</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~$ sudo su
~# vim /etc/ssh_config
</code></pre></div></div> <p>and added this line:</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ProxyCommand /usr/local/bin/corkscrew proxy.address 80 %h %p
</code></pre></div></div> <p>Just adapt This will enable the HTTP tunnel when using SSH, but remember to re-edit the config file if you connect from within different networks!</p> <p>If you’re interested in this argument and want a more flexible configuration for your tunnels, I’ve found a lot of useful info <a href="http://www.mtu.net/~engstrom/ssh-proxy.php">here</a>.</p> <p>Hope this helps!</p> <br> <nav class="pagination"> <a href="/2009/02/15/tutorial-vodafone-umts-modem-on-a-debian-lenny/" class="pagination_pager" title="Tutorial: Vodafone UMTS modem on a Debian lenny ">&lt; Tutorial: Vodafone UMTS mod...</a> <a href="/2009/03/24/apache-meetups-day-1/" class="pagination_pager" title="Apache Meetups - Day #1 ">Apache Meetups - Day #1 &gt;</a> </nav> <a href="https://twitter.com/intent/tweet?text=http://localhost:4000/2009/02/17/tutorial-corkscrew-on-leopard/" class="btn btn_twitter" title="Share on Twitter"><i class="fa fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a> <a href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/2009/02/17/tutorial-corkscrew-on-leopard/" class="btn btn_facebook" title="Share on Facebook"><i class="fa fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a> <a href="https://news.ycombinator.com/submitlink?u=http://localhost:4000/2009/02/17/tutorial-corkscrew-on-leopard/" class="btn btn_hn" title="Share on Hacker News"><i class="fa fa-fw fa-hacker-news" aria-hidden="true"></i><span> Hacker News</span></a> <br /> </div> </div> <!-- JS --> <script src="/assets/js/main.min.js"></script> <div class="overlay"> <ul class="projects-menu"> <li style="background:url(http://taylantatli.me/Halve/images/halve-home-image.png) center center no-repeat;"> <a href="http://taylantatli.me/Halve" class="inactive" target="_blank" rel="nofollow external"> <span> Halve Jekyll Theme <br><em>in progress</em> </span> </a> </li> <li style="background:url(https://cloud.githubusercontent.com/assets/754514/14509720/61c61058-01d6-11e6-93ab-0918515ecd56.png) center center no-repeat;"> <a href="http://taylantatli.me/Moon" target="_blank" rel="nofollow external"> <span> Moon Jekyll Theme </span> </a> </li> <li style="background:url(https://raw.githubusercontent.com/TaylanTatli/Ramme/master/assets/img/screenshot-post.png) center center no-repeat;"> <a href="http://taylantatli.me/Ramme" target="_blank" rel="nofollow external"> <span> Ramme Jekyll Theme </span> </a> </li> <li style="background:url(https://raw.githubusercontent.com/TaylanTatli/Daisy-Pelican-Theme/master/Preview-1.png) center center no-repeat;"> <a href="http://taylantatli.me/Daisy-Pelican-Theme/" target="_blank" rel="nofollow external"> <span> Daisy Pelican Theme </span> </a> </li> <li style="background:url(https://raw.githubusercontent.com/TaylanTatli/Block-Icon-Theme/master/Preview.png) center center no-repeat;"> <a href="https://github.com/TaylanTatli/Block-Icon-Theme" class="inactive" target="_blank" rel="nofollow external"> <span> Block Icon Theme <br><em>in progress</em> </span> </a> </li> <li style="background:url(https://raw.githubusercontent.com/TaylanTatli/StartPage/master/preview.png) center center no-repeat;"> <a href="http://taylantatli.me/StartPage/" class="inactive" target="_blank" rel="nofollow external"> <span> Start Page <br><em>in progress</em> </span> </a> </li> </ul> </div> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','https://www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-6754361-4', 'auto'); ga('send', 'pageview'); </script> </body> </html>
