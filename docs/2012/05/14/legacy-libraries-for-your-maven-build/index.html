<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"> <title>Legacy libraries for your maven build &#8211; CodeHopper</title> <meta name="description" content="Legacy libraries"> <meta name="keywords" content=""> <!-- Twitter Cards --> <meta name="twitter:card" content="summary"> <meta name="twitter:image" content="https://codehopper.nl/img/logo.png"> <meta name="twitter:title" content="Legacy libraries for your maven build"> <meta name="twitter:description" content="Legacy libraries"> <meta name="twitter:site" content="@skuro"> <meta name="twitter:creator" content="@skuro"> <!-- Open Graph --> <meta property="og:locale" content="en_US"> <meta property="og:type" content="article"> <meta property="og:title" content="Legacy libraries for your maven build"> <meta property="og:description" content="Legacy libraries"> <meta property="og:url" content="https://codehopper.nl/2012/05/14/legacy-libraries-for-your-maven-build/"> <meta property="og:site_name" content="CodeHopper"> <meta property="og:image" content="https://codehopper.nl/img/logo.png"> <link rel="canonical" href="https://codehopper.nl/2012/05/14/legacy-libraries-for-your-maven-build/"> <!-- Handheld --> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Feed --> <link type="application/atom+xml" rel="alternate" href="https://codehopper.nl/feed.xml" title="" /> <!-- Favicons --> <link rel="shortcut icon" type="image/png" href="/favicon.png" /> <link rel="shortcut icon" href="/favicon.ico" /> <!-- CSS --> <link rel="stylesheet" type="text/css" href="/assets/css/main.css"> <!-- Left Block Image for Posts --> <style type="text/css"> #posts.inner-post-page .block-left {background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url(/img/default-post.png) no-repeat;background-size: cover;} </style> <!-- Left Block Images for Home and Pages --> <style type="text/css"> #posts .block-left {background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url(/img/post-list.png) no-repeat;background-size: cover, cover;} .block-left {background: linear-gradient(rgba(44,45,51,0.9), rgba(44,45,51,0.9)), url(/img/home.png) no-repeat;background-size: cover;} </style> </head> <body id="posts" class="inner-post-page"> <div class="block-left" style="background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url(/img/post/legacy.png) no-repeat; background-size: cover"> <div class="content"> <a href="/" class="logo"><img src="/img/logo-small.png"></a> <div class="post-title-section"> <div class="section-line">Posts <em>/</em></div> <h1 class="section-title">Legacy libraries for your maven build </h1> <ul class="tags"> <li><a href="/tags#alm">alm</a></li> <li><a href="/tags#maven">maven</a></li> </ul> <div class="section-line reverse"><a href="/posts">Back to posts</a> <em>/</em></div> </div> </div> </div> <div class="block-right"> <div class="share-buttons"> <a href="https://twitter.com/intent/tweet?text=https://codehopper.nl/2012/05/14/legacy-libraries-for-your-maven-build/" class="btn btn_twitter" title="Share on Twitter"><i class="fa fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a> <a href="https://www.facebook.com/sharer/sharer.php?u=https://codehopper.nl/2012/05/14/legacy-libraries-for-your-maven-build/" class="btn btn_facebook" title="Share on Facebook"><i class="fa fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a> <a href="https://plus.google.com/share?url=https://codehopper.nl/2012/05/14/legacy-libraries-for-your-maven-build/" class="btn btn_google-plus" title="Share on Google Plus"><i class="fa fa-fw fa-google-plus" aria-hidden="true"></i><span> Google+</span></a> </div> <a href="/posts.html" title="posts" class="posts-menu-icon"></a> <!-- a title="/projects" class="projects-menu-icon"> <span></span> </a --> <div class="inner-post content"> <nav class="pagination"> <a href="/2012/05/08/debug-your-build-with-the-plan-maven-plugin/" class="pagination_pager" title="Debug your build with the plan maven plugin ">&lt; Debug your build with the p...</a> <a href="/2012/05/28/legacy-artifacts-repository-update-going-remote/" class="pagination_pager" title="Legacy artifacts repository update: going remote ">Legacy artifacts repository... &gt;</a> </nav> <div class="date-highlight">14 May 2012</div> <h1 id="legacy-libraries">Legacy libraries</h1> <p>Dealing with legacy code is always tricky, and adapting your tooling to leverage them is sometimes plain hard. Especially when you’re building your projects with Maven and your code happens to depend on some ancient library which appear to be unknown to the Internet™, you probably have to figure out how to tell Maven where to find that damn library. This is also the problem when dealing with e.g. proprietary third party libraries which don’t ship with a POM, therefore they don’t mavenly exist.</p> <h1 id="local-repositories-ftw">Local repositories FTW</h1> <p><strong>UPDATE:</strong> following the argument from <a href="http://discursive.com/">Tim O’Brien</a>, I wrote a <a href="http://skuro.tk/2012/05/28/legacy-artifacts-repository-update-going-remote/">follow up</a> to also exploit Github as a remote repository using the same storage strategy</p> <p>There are a number of possible solutions to the above mentioned problem, which ideally involve a shared, remote artifact repository where to deploy the JAR file that causes you headaches. Recently, I found myself in the need of creating (yet another) Maven build around some <a href="http://www.alfresco.com">Alfresco</a>, to enable <a href="http://skuro.tk/lambdalf/">Lambdalf</a> to build its Clojure sources. The rocky road to Maven for Alfresco is still long, and as a result you find yourself dealing with some iffy libraries when coding against Alfresco. Some examples, just opening up the WAR files:</p> <ul> <li><code class="highlighter-rouge">truezip.jar</code></li> <li><code class="highlighter-rouge">mybaties-3.0.4-patched.jar</code></li> <li><code class="highlighter-rouge">acegi-security-0.8.2_patched.jar</code></li> </ul> <p>One solution I found that doesn’t require setting up your publicly available <a href="http://www.sonatype.org/nexus/">Nexus</a> repository, nor using someone else’s <a href="http://www.jfrog.com/products.php">Artifactory</a>, is to provide the problematic JARs in a maven repository as part of your sources. Suppose you have a mysterious <code class="highlighter-rouge">fluff.jar</code> library you need to include in your classpath, here’s how it works:</p> <ul> <li> <p>place the JAR file in <code class="highlighter-rouge">src/main/lib/fluff/fluff/unknown/fluff-unknown.jar</code></p> </li> <li> <p>setup the dependency in your POM:</p> <dependencies> <dependency> <groupid>fluff</groupid> <artifactid>fluff</artifactid> <version>unknown</version> </dependency> </dependencies> </li> <li> <p>still in your POM, enable the local repository:</p> <repositories> <repository> <id>legacy-artifacts</id> <url>file://${project.basedir}/src/main/lib</url> </repository> </repositories> </li> </ul> <p>Voilá. You just created a local, portable repository in your sources and instructed Maven to look there for artifacts.</p> <h1 id="license">License</h1> <p>A couple of golden rules for all the cowboy programmers out there:</p> <ul> <li>always, always, <strong>always check if the license allows you to redistribute the libraries</strong> you’re going to include in your project</li> <li>never, never, <strong>never distribute a piece of software you’re not entitled to give away</strong> and <strong>attach the license of all third party libraries</strong> along with your project</li> </ul> <p>That said, I’ll leave you to your local Maven repositories. Happy building!</p> <br> <nav class="pagination"> <a href="/2012/05/08/debug-your-build-with-the-plan-maven-plugin/" class="pagination_pager" title="Debug your build with the plan maven plugin ">&lt; Debug your build with the p...</a> <a href="/2012/05/28/legacy-artifacts-repository-update-going-remote/" class="pagination_pager" title="Legacy artifacts repository update: going remote ">Legacy artifacts repository... &gt;</a> </nav> <a href="https://twitter.com/intent/tweet?text=https://codehopper.nl/2012/05/14/legacy-libraries-for-your-maven-build/" class="btn btn_twitter" title="Share on Twitter"><i class="fa fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a> <a href="https://www.facebook.com/sharer/sharer.php?u=https://codehopper.nl/2012/05/14/legacy-libraries-for-your-maven-build/" class="btn btn_facebook" title="Share on Facebook"><i class="fa fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a> <a href="https://plus.google.com/share?url=https://codehopper.nl/2012/05/14/legacy-libraries-for-your-maven-build/" class="btn btn_google-plus" title="Share on Google Plus"><i class="fa fa-fw fa-google-plus" aria-hidden="true"></i><span> Google+</span></a> <br /> <div id="disqus_thread"></div> <script> /** * RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS. * LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/ /* var disqus_config = function () { this.page.url = PAGE_URL; this.page.identifier = PAGE_IDENTIFIER; }; */ (function() { /* DON'T EDIT BELOW THIS LINE */ var d = document, s = d.createElement('script'); s.src = '//skuro.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> </div> </div> <!-- JS --> <script src="/assets/js/main.min.js"></script> <div class="overlay"> <ul class="projects-menu"> <li style="background:url(http://taylantatli.me/Halve/images/halve-home-image.png) center center no-repeat;"> <a href="http://taylantatli.me/Halve" class="inactive" target="_blank" rel="nofollow external"> <span> Halve Jekyll Theme <br><em>in progress</em> </span> </a> </li> <li style="background:url(https://cloud.githubusercontent.com/assets/754514/14509720/61c61058-01d6-11e6-93ab-0918515ecd56.png) center center no-repeat;"> <a href="http://taylantatli.me/Moon" target="_blank" rel="nofollow external"> <span> Moon Jekyll Theme </span> </a> </li> <li style="background:url(https://raw.githubusercontent.com/TaylanTatli/Ramme/master/assets/img/screenshot-post.png) center center no-repeat;"> <a href="http://taylantatli.me/Ramme" target="_blank" rel="nofollow external"> <span> Ramme Jekyll Theme </span> </a> </li> <li style="background:url(https://raw.githubusercontent.com/TaylanTatli/Daisy-Pelican-Theme/master/Preview-1.png) center center no-repeat;"> <a href="http://taylantatli.me/Daisy-Pelican-Theme/" target="_blank" rel="nofollow external"> <span> Daisy Pelican Theme </span> </a> </li> <li style="background:url(https://raw.githubusercontent.com/TaylanTatli/Block-Icon-Theme/master/Preview.png) center center no-repeat;"> <a href="https://github.com/TaylanTatli/Block-Icon-Theme" class="inactive" target="_blank" rel="nofollow external"> <span> Block Icon Theme <br><em>in progress</em> </span> </a> </li> <li style="background:url(https://raw.githubusercontent.com/TaylanTatli/StartPage/master/preview.png) center center no-repeat;"> <a href="http://taylantatli.me/StartPage/" class="inactive" target="_blank" rel="nofollow external"> <span> Start Page <br><em>in progress</em> </span> </a> </li> </ul> </div> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','https://www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-6754361-4', 'auto'); ga('send', 'pageview'); </script> </body> </html>
