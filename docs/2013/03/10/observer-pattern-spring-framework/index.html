<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"> <title>The Observer Pattern in Spring &#8211; CodeHopper</title> <meta name="description" content="Observers in Spring"> <meta name="keywords" content=""> <!-- Twitter Cards --> <meta name="twitter:card" content="summary"> <meta name="twitter:image" content="https://codehopper.nl/img/logo.png"> <meta name="twitter:title" content="The Observer Pattern in Spring"> <meta name="twitter:description" content="Observers in Spring"> <meta name="twitter:site" content="@skuro"> <meta name="twitter:creator" content="@skuro"> <!-- Open Graph --> <meta property="og:locale" content="en_US"> <meta property="og:type" content="article"> <meta property="og:title" content="The Observer Pattern in Spring"> <meta property="og:description" content="Observers in Spring"> <meta property="og:url" content="https://codehopper.nl/2013/03/10/observer-pattern-spring-framework/"> <meta property="og:site_name" content="CodeHopper"> <meta property="og:image" content="https://codehopper.nl/img/logo.png"> <link rel="canonical" href="https://codehopper.nl/2013/03/10/observer-pattern-spring-framework/"> <!-- Handheld --> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Feed --> <link type="application/atom+xml" rel="alternate" href="https://codehopper.nl/feed.xml" title="" /> <!-- Favicons --> <link rel="shortcut icon" type="image/png" href="/favicon.png" /> <link rel="shortcut icon" href="/favicon.ico" /> <!-- CSS --> <link rel="stylesheet" type="text/css" href="/assets/css/main.css"> <!-- Left Block Image for Posts --> <style type="text/css"> #posts.inner-post-page .block-left {background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url(/img/default-post.png) no-repeat;background-size: cover;} </style> <!-- Left Block Images for Home and Pages --> <style type="text/css"> #posts .block-left {background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url(/img/post-list.png) no-repeat;background-size: cover, cover;} .block-left {background: linear-gradient(rgba(44,45,51,0.9), rgba(44,45,51,0.9)), url(/img/home.png) no-repeat;background-size: cover;} </style> </head> <body id="posts" class="inner-post-page"> <div class="block-left" style="background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url(/img/post/observer.png) no-repeat; background-size: cover"> <div class="content"> <a href="/" class="logo"><img src="/img/logo-small.png"></a> <div class="post-title-section"> <div class="section-line">Posts <em>/</em></div> <h1 class="section-title">The Observer Pattern in Spring </h1> <ul class="tags"> <li><a href="/tags#java">java</a></li> <li><a href="/tags#spring">spring</a></li> <li><a href="/tags#patterns">patterns</a></li> </ul> <div class="section-line reverse"><a href="/posts">Back to posts</a> <em>/</em></div> </div> </div> </div> <div class="block-right"> <div class="share-buttons"> <a href="https://twitter.com/intent/tweet?text=https://codehopper.nl/2013/03/10/observer-pattern-spring-framework/" class="btn btn_twitter" title="Share on Twitter"><i class="fa fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a> <a href="https://www.facebook.com/sharer/sharer.php?u=https://codehopper.nl/2013/03/10/observer-pattern-spring-framework/" class="btn btn_facebook" title="Share on Facebook"><i class="fa fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a> <a href="https://plus.google.com/share?url=https://codehopper.nl/2013/03/10/observer-pattern-spring-framework/" class="btn btn_google-plus" title="Share on Google Plus"><i class="fa fa-fw fa-google-plus" aria-hidden="true"></i><span> Google+</span></a> </div> <a href="/posts.html" title="posts" class="posts-menu-icon"></a> <!-- a title="/projects" class="projects-menu-icon"> <span></span> </a --> <div class="inner-post content"> <nav class="pagination"> <a href="/2013/03/06/java-stringbuilder-myth/" class="pagination_pager" title="Java StringBuilder myth debunked ">&lt; Java StringBuilder myth deb...</a> <a href="/2013/03/11/java-stringbuilder-myth-now-with-content/" class="pagination_pager" title="Java StringBuilder myth debunked – now with content! ">Java StringBuilder myth deb... &gt;</a> </nav> <div class="date-highlight">10 Mar 2013</div> <h1 id="observers-in-spring">Observers in Spring</h1> <blockquote> <p>To the man-in-the-street, who, I’m sorry to say,<br /> Is a keen observer of life,<br /> The word “Intellectual” suggests straight away<br /> A man who’s untrue to his wife.</p> <p>– W.H. Auden</p> </blockquote> <p>The Observer pattern is a very basic one out of the GoF bible which is unbelivably easy to implement and still quote powerful so use. Here I present my take on it using the Spring observer pattern which I found quite helpful in designing extension points for my software.</p> <h1 id="core-classes">Core classes</h1> <p>Pushing back the little NIH devil whispering in my ears, I started by reusing the standard building blocks for the Observer pattern: <code class="highlighter-rouge">java.util.Observable</code> and <code class="highlighter-rouge">java.util.Observer</code>. The Observable class provides the logic to handle a registry of Observers, and to propagate updates (I prefer to think more of in terms of events) to all of the registered Observers.</p> <p>In the context of a Spring container, there will be beans to configure and hook together, and it’s key to this exercise to find a flexible and handy way to connect things together.</p> <h1 id="automatic-registration">Automatic registration</h1> <p>Supporting code for this blog post can be found on <a href="https://github.com/skuro/spring-observer">GitHub</a>.</p> <p>When developing a Spring application you’re always instantiating your classes as singletons within the Spring container. Annotations or XML configurations will take care of initialize instances of your classes, wiring them together in a connected graph of objects with loose dependencies on the specific concrete classes you adopt in your code.</p> <p>As you will always have to declare beans, it would be nice to let Spring wire obects for you in an Observer fashion, with a minimal coding effort required. The most minimalistic approach I could think of is to just require developers to declare their observer beans, and put in place enough machinery to automatically hook them to an Observable provided by the application. In this example I create a <code class="highlighter-rouge">ObserverBeanPostProcessor</code> and a <code class="highlighter-rouge">SpringObserver</code> tagging interface to identify which beans are actually declaring valid Observers, and register them automatically.</p> <p>To complete the picture, the <code class="highlighter-rouge">SpringObservable</code> interface declares which <code class="highlighter-rouge">Observer</code> class it’s able to notify, thus leveraging the tagging interface and letting the <code class="highlighter-rouge">ObserverBeanPostProcessor</code> know which beans to filter and registser.</p> <p>This enables a software component to provide the desired <code class="highlighter-rouge">SpringObservable</code> and the <code class="highlighter-rouge">ObserverBeanPostProcessor</code> beans, where consumers of such API will be only required to instantiate their <code class="highlighter-rouge">Observer</code> beans.</p> <p>Note that <code class="highlighter-rouge">Observers</code> can be themselves <code class="highlighter-rouge">Observables</code>, so that you can easily construct chains of beans in which events will be propagated. As long as you ensure not to form any cyclic graph, of course.</p> <h1 id="conclusions">Conclusions</h1> <p>In object oriented languages such as Java, patterns are a powerful tool to apply. The Observer is a neat strategy for cascading changes on objects, or just to propagate events through a series of processors. All in a clean, loosly coupled fashion.</p> <p>The code here is just a proof of concept, not a library which is intended for production use. The concepts and the implementation are easy enough to be applied in your Spring application without any need for depending on this code.</p> <br> <nav class="pagination"> <a href="/2013/03/06/java-stringbuilder-myth/" class="pagination_pager" title="Java StringBuilder myth debunked ">&lt; Java StringBuilder myth deb...</a> <a href="/2013/03/11/java-stringbuilder-myth-now-with-content/" class="pagination_pager" title="Java StringBuilder myth debunked – now with content! ">Java StringBuilder myth deb... &gt;</a> </nav> <a href="https://twitter.com/intent/tweet?text=https://codehopper.nl/2013/03/10/observer-pattern-spring-framework/" class="btn btn_twitter" title="Share on Twitter"><i class="fa fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a> <a href="https://www.facebook.com/sharer/sharer.php?u=https://codehopper.nl/2013/03/10/observer-pattern-spring-framework/" class="btn btn_facebook" title="Share on Facebook"><i class="fa fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a> <a href="https://plus.google.com/share?url=https://codehopper.nl/2013/03/10/observer-pattern-spring-framework/" class="btn btn_google-plus" title="Share on Google Plus"><i class="fa fa-fw fa-google-plus" aria-hidden="true"></i><span> Google+</span></a> <br /> <div id="disqus_thread"></div> <script> /** * RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS. * LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/ /* var disqus_config = function () { this.page.url = PAGE_URL; this.page.identifier = PAGE_IDENTIFIER; }; */ (function() { /* DON'T EDIT BELOW THIS LINE */ var d = document, s = d.createElement('script'); s.src = '//skuro.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> </div> </div> <!-- JS --> <script src="/assets/js/main.min.js"></script> <div class="overlay"> <ul class="projects-menu"> <li style="background:url(http://taylantatli.me/Halve/images/halve-home-image.png) center center no-repeat;"> <a href="http://taylantatli.me/Halve" class="inactive" target="_blank" rel="nofollow external"> <span> Halve Jekyll Theme <br><em>in progress</em> </span> </a> </li> <li style="background:url(https://cloud.githubusercontent.com/assets/754514/14509720/61c61058-01d6-11e6-93ab-0918515ecd56.png) center center no-repeat;"> <a href="http://taylantatli.me/Moon" target="_blank" rel="nofollow external"> <span> Moon Jekyll Theme </span> </a> </li> <li style="background:url(https://raw.githubusercontent.com/TaylanTatli/Ramme/master/assets/img/screenshot-post.png) center center no-repeat;"> <a href="http://taylantatli.me/Ramme" target="_blank" rel="nofollow external"> <span> Ramme Jekyll Theme </span> </a> </li> <li style="background:url(https://raw.githubusercontent.com/TaylanTatli/Daisy-Pelican-Theme/master/Preview-1.png) center center no-repeat;"> <a href="http://taylantatli.me/Daisy-Pelican-Theme/" target="_blank" rel="nofollow external"> <span> Daisy Pelican Theme </span> </a> </li> <li style="background:url(https://raw.githubusercontent.com/TaylanTatli/Block-Icon-Theme/master/Preview.png) center center no-repeat;"> <a href="https://github.com/TaylanTatli/Block-Icon-Theme" class="inactive" target="_blank" rel="nofollow external"> <span> Block Icon Theme <br><em>in progress</em> </span> </a> </li> <li style="background:url(https://raw.githubusercontent.com/TaylanTatli/StartPage/master/preview.png) center center no-repeat;"> <a href="http://taylantatli.me/StartPage/" class="inactive" target="_blank" rel="nofollow external"> <span> Start Page <br><em>in progress</em> </span> </a> </li> </ul> </div> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','https://www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-6754361-4', 'auto'); ga('send', 'pageview'); </script> </body> </html>
